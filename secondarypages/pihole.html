<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pi-hole Project | Abdeelkrim Zouaki</title>
  <link rel="stylesheet" href="../stylesheets/style4.css">
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #333;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }
    
    .project-section {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    h1 {
      color: #0066cc;
      border-bottom: 3px solid #0066cc;
      padding-bottom: 15px;
      margin-bottom: 20px;
    }
    
    h2 {
      margin-top: 40px;
      border-bottom: 2px solid #0066cc;
      padding-bottom: 10px;
      color: #0066cc;
    }
    
    h3 {
      color: #444;
      margin-top: 25px;
    }
    
    .command-block {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 15px 0;
      font-family: 'Courier New', 'Consolas', monospace;
      font-size: 14px;
      line-height: 1.5;
    }
    
    .info-box {
      background: #e8f4f8;
      border-left: 4px solid #0066cc;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
    
    .warning-box {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
    
    .success-box {
      background: #d4edda;
      border-left: 4px solid #28a745;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
    
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .gallery img {
      width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }
    
    .gallery img:hover {
      transform: scale(1.02);
    }
    
    .step-number {
      display: inline-block;
      background: #0066cc;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      text-align: center;
      line-height: 30px;
      margin-right: 10px;
      font-weight: bold;
    }
    
    code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', 'Consolas', monospace;
      color: #e83e8c;
      font-size: 0.9em;
    }
    
    .tech-specs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    
    .tech-card {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      border-left: 3px solid #0066cc;
    }
    
    .tech-card strong {
      display: block;
      color: #0066cc;
      margin-bottom: 10px;
      font-size: 1.1em;
    }
    
    .footer {
      margin-top: 50px;
      padding-top: 20px;
      border-top: 1px solid #ddd;
      text-align: center;
      color: #666;
    }
    
    ul, ol {
      padding-left: 25px;
    }
    
    li {
      margin: 8px 0;
    }
    
    a {
      color: #0066cc;
      text-decoration: none;
    }
    
    a:hover {
      text-decoration: underline;
    }
    
    @media (max-width: 768px) {
      .project-section {
        padding: 15px;
      }
      
      .tech-specs {
        grid-template-columns: 1fr;
      }
      
      .gallery {
        grid-template-columns: 1fr;
      }
      
      .command-block {
        font-size: 12px;
        padding: 10px;
      }
    }
  </style>
</head>
<body>
  <section class="project-section">
    <h1>üõ°Ô∏è Building a Network-wide Ad Blocker with Pi-hole</h1>
    <p><strong>Date:</strong> October 2025 | <strong>Author:</strong> Karim Zouaki</p>
    
    <div class="info-box">
      <strong>Project Overview:</strong> This documentation details the complete setup of a Pi-hole DNS sinkhole on a Raspberry Pi to block advertisements, trackers, and malicious domains across an entire home network. This project demonstrates practical skills in Linux system administration, networking, DNS configuration, and cybersecurity hardening.
    </div>

    <h2>üéØ Project Objectives</h2>
    <ul>
      <li>Deploy a network-level ad blocker that protects all devices automatically</li>
      <li>Improve network privacy by blocking tracking and telemetry domains</li>
      <li>Enhance DNS security with DNS-over-HTTPS (DoH) support</li>
      <li>Reduce bandwidth usage and improve page load times</li>
      <li>Gain hands-on experience with Raspberry Pi, Linux, and network administration</li>
    </ul>

    <h2>‚öôÔ∏è Technical Specifications</h2>
    <div class="tech-specs">
      <div class="tech-card">
        <strong>Hardware</strong>
        Raspberry Pi Zero 2 WH<br>
        MicroSD Card (16GB+)<br>
        Power Supply (5V/2.5A)
      </div>
      <div class="tech-card">
        <strong>Software</strong>
        Raspberry Pi OS (Debian-based)<br>
        Pi-hole v5.x<br>
        NetworkManager
      </div>
      <div class="tech-card">
        <strong>Network Config</strong>
        Static IP: 10.0.0.153<br>
        Gateway: 10.0.0.1<br>
        DNS: Cloudflare (1.1.1.1)
      </div>
      <div class="tech-card">
        <strong>Access</strong>
        SSH enabled<br>
        Web interface: http://10.0.0.153/admin<br>
        mDNS: raspberrypi.local
      </div>
    </div>

    <h2>üîß Installation Process</h2>

    <h3><span class="step-number">1</span>Initial System Preparation</h3>
    <p>After flashing Raspberry Pi OS and enabling SSH, connect from your workstation:</p>
    <div class="command-block"># Discover Raspberry Pi on the network
sudo nmap -sn 10.0.0.0/24

# Connect via SSH (default password: raspberry)
ssh pi@10.0.0.153</div>

    <h3><span class="step-number">2</span>System Update and Security</h3>
    <p>First, secure the system and update all packages:</p>
    <div class="command-block"># Change default password
passwd

# Update system packages
sudo apt update && sudo apt full-upgrade -y
sudo apt autoremove -y

# Install essential tools
sudo apt install -y curl git htop vim net-tools</div>

    <h3><span class="step-number">3</span>Configure Static IP Address</h3>
    <div class="warning-box">
      <strong>Important:</strong> Modern Raspberry Pi OS uses NetworkManager instead of dhcpcd. If you see <code>dhcpcd.service not found</code>, use the NetworkManager method below.
    </div>
    
    <p><strong>Method 1: NetworkManager (Recommended for newer Pi OS)</strong></p>
    <div class="command-block"># Open network configuration interface
sudo nmtui

# Navigate: Edit a connection ‚Üí eth0 ‚Üí IPv4 Configuration ‚Üí Manual
# Set:
#   Address: 10.0.0.153/24
#   Gateway: 10.0.0.1
#   DNS servers: 1.1.1.1, 8.8.8.8

# Restart networking
sudo systemctl restart NetworkManager

# Verify IP configuration
ip -4 addr show eth0</div>

    <p><strong>Method 2: dhcpcd (Legacy method)</strong></p>
    <div class="command-block"># Edit DHCP configuration
sudo nano /etc/dhcpcd.conf

# Add the following lines:
interface eth0
static ip_address=10.0.0.153/24
static routers=10.0.0.1
static domain_name_servers=1.1.1.1 8.8.8.8

# Restart DHCP client
sudo systemctl restart dhcpcd</div>

    <h3><span class="step-number">4</span>Verify System Resources</h3>
    <p>Ensure sufficient disk space and system health:</p>
    <div class="command-block"># Check disk space (should have 1-2GB free minimum)
df -h

# Clean up if needed
sudo apt-get clean
sudo apt-get autoremove -y
sudo journalctl --vacuum-size=100M

# Check system status
uptime
free -h</div>

    <h3><span class="step-number">5</span>Install Pi-hole</h3>
    <p>Run the official Pi-hole installer:</p>
    <div class="command-block">curl -sSL https://install.pi-hole.net | bash</div>

    <div class="info-box">
      <strong>Installation Wizard Choices:</strong>
      <ul style="margin: 10px 0 0 0;">
        <li>‚úÖ Network interface: eth0 (or wlan0 for Wi-Fi)</li>
        <li>‚úÖ Upstream DNS: Cloudflare (1.1.1.1) - fast and privacy-focused</li>
        <li>‚úÖ Blocklists: Use default StevenBlack list</li>
        <li>‚úÖ Admin Web Interface: Yes</li>
        <li>‚úÖ Web Server: Lighttpd (default)</li>
        <li>‚úÖ Logging: Enable query logging</li>
        <li>‚úÖ Privacy Mode: Show everything (can adjust later)</li>
      </ul>
    </div>

    <h3><span class="step-number">6</span>Configure Router DNS</h3>
    <p>Point your router's DHCP server to use Pi-hole as the DNS server:</p>
    <ol>
      <li>Access your router admin panel (usually http://10.0.0.1)</li>
      <li>Navigate to DHCP settings</li>
      <li>Set Primary DNS to: <code>10.0.0.153</code></li>
      <li>Save and reboot router (or renew DHCP leases on devices)</li>
    </ol>

    <div class="success-box">
      <strong>Result:</strong> All devices on the network will now use Pi-hole for DNS resolution, automatically blocking ads and tracking domains without any per-device configuration.
    </div>

    <h2>üñ•Ô∏è Web Interface Configuration</h2>
    <p>Access the Pi-hole admin dashboard at:</p>
    <div class="command-block">http://10.0.0.153/admin
# or
http://raspberrypi.local/admin</div>

    <h3>Setting/Changing Admin Password</h3>
    <div class="command-block">pihole -a -p
# Enter new password when prompted</div>

    <h3>Key Dashboard Features</h3>
    <ul>
      <li><strong>Total Queries:</strong> Real-time view of DNS requests</li>
      <li><strong>Queries Blocked:</strong> Percentage and count of blocked domains</li>
      <li><strong>Blocklist:</strong> Currently blocking domains from selected lists</li>
      <li><strong>Top Allowed/Blocked Domains:</strong> Analytics on network traffic patterns</li>
      <li><strong>Query Log:</strong> Detailed logs for troubleshooting and monitoring</li>
    </ul>

    <h2>üìä Results and Performance</h2>
    
    <div class="success-box">
      <strong>Immediate Impact:</strong>
      <ul style="margin: 10px 0 0 0;">
        <li>‚úÖ Network-wide ad blocking active across all devices</li>
        <li>‚úÖ Mobile apps, smart TVs, and IoT devices protected</li>
        <li>‚úÖ Reduced bandwidth consumption</li>
        <li>‚úÖ Faster page load times (no ad resources loaded)</li>
        <li>‚úÖ Enhanced privacy (blocked tracking pixels and analytics)</li>
      </ul>
    </div>

    <h2>üì∏ Project Screenshots</h2>
    <div class="gallery">
      <img src="../images/pihole_install_1.png" alt="Pi-hole installation process - network detection">
      <img src="../images/pihole_install_2.png" alt="Pi-hole installation - upstream DNS selection">
      <img src="../images/pihole_install_3.png" alt="Pi-hole installation - blocklist configuration">
      <img src="../images/pihole_install_4.png" alt="Pi-hole installation - web interface setup">
      <img src="../images/pihole_dashboard.png" alt="Pi-hole admin dashboard showing blocked queries">
      <img src="../images/pihole_queries.png" alt="Query log showing DNS requests and blocks">
      <img src="../images/pihole_stats.png" alt="Statistics and analytics dashboard">
      <img src="../images/mobile_no_ads.jpg" alt="Mobile device showing ad-free browsing">
    </div>

    <h2>üîí Security Hardening (Optional)</h2>
    
    <h3>Enable HTTPS for Web Interface</h3>
    <div class="command-block">sudo apt install lighttpd openssl -y
sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout /etc/lighttpd/server.pem \
  -out /etc/lighttpd/server.pem</div>

    <h3>Install Fail2Ban for Brute-Force Protection</h3>
    <div class="command-block">sudo apt install fail2ban -y
sudo systemctl enable fail2ban
sudo systemctl start fail2ban</div>

    <h3>Update Pi-hole Blocklists</h3>
    <div class="command-block"># Update gravity (blocklists)
pihole -g

# View available commands
pihole -h</div>

    <h2>üß™ Testing and Verification</h2>
    
    <h3>Test DNS Resolution</h3>
    <div class="command-block"># From any device on your network
nslookup google.com 10.0.0.153

# Should return a response (DNS working)</div>

    <h3>Test Ad Blocking</h3>
    <div class="command-block"># Watch queries in real-time
pihole -t

# Or visit test pages:
# https://pi-hole.net/pages-to-test-ad-blocking-performance/</div>

    <h3>Monitor Query Logs</h3>
    <p>Check the Query Log in the web interface to see which domains are being blocked in real-time. You can whitelist or blacklist domains as needed.</p>

    <h2>üêõ Troubleshooting</h2>
    
    <h3>DNS Not Working</h3>
    <ul>
      <li>Verify Pi-hole is running: <code>pihole status</code></li>
      <li>Check FTL (Faster Than Light) DNS service: <code>sudo systemctl status pihole-FTL</code></li>
      <li>Restart Pi-hole: <code>pihole restartdns</code></li>
    </ul>

    <h3>Cannot Access Web Interface</h3>
    <ul>
      <li>Verify lighttpd is running: <code>sudo systemctl status lighttpd</code></li>
      <li>Check firewall rules if enabled</li>
      <li>Verify IP address: <code>hostname -I</code></li>
    </ul>

    <h3>Some Sites Breaking</h3>
    <ul>
      <li>Check Query Log for blocked domains</li>
      <li>Whitelist necessary domains: <code>pihole -w domain.com</code></li>
      <li>Temporarily disable blocking: <code>pihole disable 5m</code> (5 minutes)</li>
    </ul>

    <h2>üí° Key Takeaways</h2>
    <ul>
      <li><strong>DNS-Level Filtering:</strong> Understanding how DNS sinkholes work to block unwanted content at the network level</li>
      <li><strong>Linux System Administration:</strong> Hands-on experience with package management, service configuration, and system hardening</li>
      <li><strong>Network Configuration:</strong> Practical application of static IP assignment, DHCP configuration, and router DNS settings</li>
      <li><strong>Security & Privacy:</strong> Enhanced understanding of online tracking mechanisms and privacy protection techniques</li>
      <li><strong>Monitoring & Analytics:</strong> Real-time visibility into network DNS traffic and patterns</li>
    </ul>

    <h2>üöÄ Future Enhancements</h2>
    <ul>
      <li>Implement Unbound as a recursive DNS resolver for additional privacy</li>
      <li>Set up DNS-over-HTTPS (DoH) or DNS-over-TLS (DoT)</li>
      <li>Configure Gravity Sync for multiple Pi-hole instances (redundancy)</li>
      <li>Integrate with Prometheus and Grafana for advanced monitoring</li>
      <li>Automate blocklist updates and maintenance with cron jobs</li>
      <li>Implement VPN integration for remote ad-blocking access</li>
    </ul>

    <h2>üîó Resources and References</h2>
    <ul>
      <li><a href="https://pi-hole.net/" target="_blank">Official Pi-hole Website</a></li>
      <li><a href="https://github.com/pi-hole/pi-hole" target="_blank">Pi-hole GitHub Repository</a></li>
      <li><a href="https://docs.pi-hole.net/" target="_blank">Pi-hole Documentation</a></li>
      <li><a href="https://discourse.pi-hole.net/" target="_blank">Pi-hole Community Forum</a></li>
      <li><a href="https://www.raspberrypi.com/documentation/" target="_blank">Raspberry Pi Documentation</a></li>
    </ul>

    <h2>üìù Technical Skills Demonstrated</h2>
    <div class="tech-specs">
      <div class="tech-card">
        <strong>Networking</strong>
        DNS Configuration<br>
        Static IP Setup<br>
        DHCP Management<br>
        Network Troubleshooting
      </div>
      <div class="tech-card">
        <strong>Linux Administration</strong>
        Package Management (apt)<br>
        Service Management (systemd)<br>
        File System Navigation<br>
        System Monitoring<br>
        Shell Scripting
      </div>
      <div class="tech-card">
        <strong>Security</strong>
        DNS Sinkhole Implementation<br>
        Access Control<br>
        SSL/TLS Configuration<br>
        Fail2Ban Setup<br>
        System Hardening
      </div>
      <div class="tech-card">
        <strong>Hardware</strong>
        Raspberry Pi Configuration<br>
        Embedded Systems<br>
        Network Appliances<br>
        IoT Security
      </div>
    </div>

    <div class="footer">
      <p>&copy; 2025 Karim Zouaki | Network Security & Infrastructure</p>
    </div>
  </section>
</body>
</html>
